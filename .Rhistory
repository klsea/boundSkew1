# load required packages
library(here)
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
View(dt)
grep(Q173, colnames(dt))
grep('Q173', colnames(dt))
grep('Q27', colnames(dt))
# load source functions
source(here('scr', 'isolate_skew.R'))
# identify begining and end of
grep('Q173', colnames(dt))
grep('Q27', colnames(dt))
View(isolate_skew)
# identify begining and end of
isolate_skew(dt, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
View(dt)
View(isolate_skew)
# identify begining and end of
isolate_skew(dt, grep('Q173', 1, colnames(dt)):grep('Q27', colnames(dt)))
grep('Q27', colnames(dt))[1]
grep('Q27', colnames(dt))[[1]]
# identify begining and end of
isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
View(d1)
# investment
lost_invest <- d1$Q173 - 1
# investment
d1$lost_invest <- d1$Q173 - 1
# investment
d2$lost_invest <- d1$Q173 - 1
# investment
d2 <- cbind(d1$ID, d1$Q173 - 1)
View(d2)
colnames(d2) <- c('ID', 'lost_invest')
View(d2)
# investment
d2 <- data.frame(d1$ID, d1$Q173 - 1)
View(d2)
colnames(d2) <- c('ID', 'lost_invest')
View(d2)
d3 <- d1[which(d1$Q173 == 2),]
View(d3)
d3 <- d1[which(d1$Q173 == 1),]
View(d3)
colmean(d3$Q174)
colMean(d3$Q174)
d3$Q177
# fraud
d1$Q11
grep('Q11', colnames(d1))
grep('Q17', colnames(d1))
# fraud
d4 <- d1[11:14]
View(dt)
View(d4)
# investment
d2 <- data.frame(d1$ID, d1$Q173 - 1, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'detect_fraud', 'likely_fraud', 'high-pressure', 'avoid_fraud')
View(d2)
source('~/.active-rstudio-document', echo=TRUE)
library(ggplot2)
# investment
ggplot(d2, aes("", lost_invest))
# investment
ggplot(d2, aes("", lost_invest, fill = lost_invest))
# investment
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5)
View(d1)
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1[11:14])
View(d2)
View(d1)
colnames(d2) <- c('ID', 'lost_invest', 'detect_fraud', 'likely_fraud', 'high-pressure', 'avoid_fraud')
# investment
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5)
d2$lost_invest <- factor(d2$lost_invest)
library(plyr)
revalue(d2$lost_invest, c("0"="No", "1"="Yes"))
d2$lost_invest <- revalue(d2$lost_invest, c("0"="No", "1"="Yes"))
View(d2)
# investment
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5)
# investment
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = count)
# investment
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = "count")
View(d1)
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high-pressure', 'avoid_fraud')
d2$lost_invest <- factor(d2$lost_invest)
d2$lost_invest <- revalue(d2$lost_invest, c("0"="No", "1"="Yes"))
d2$why_lost <- factor(d2$why_lost
d2$why_lost <- revalue(d2$why_lost, c('1'='Bad Investment', '2'="Market Downturn", '3'='Lack of Knowledge', '4'='Misled or Defrauded', '5'='Other"))
d2$why_lost <- revalue(d2$why_lost, c('1'='Bad Investment', '2'='Market Downturn',
'3'='Lack of Knowledge', '4'='Misled or Defrauded', '5'='Other'))
d2$why_lost <- factor(d2$why_lost)
d2$why_lost <- revalue(d2$why_lost, c('1'='Bad Investment', '2'='Market Downturn',
'3'='Lack of Knowledge', '4'='Misled or Defrauded', '5'='Other'))
gplot(d2, aes(why_lost) + geom_histogram(binwidth = .5, stat = "count")
gplot(d2, aes(why_lost)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2, aes(why_lost)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
axis.text.x  = element_text(angle=90, vjust=0.5, size=16))
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=16)))
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=16))
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12))
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost, fill = why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12))
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost, fill = why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12)) + guides(fill=FALSE)
# fraud
ggplot(d2, aes(detect_fraud)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2, aes(likely_fraud)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2, aes(high-pressure)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2, aes(avoid_fraud)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count")
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count")
d2$detect_fraud <- factor(d2$detect_fraud)
d2$detect_fraud <- revalue('1' = 'not able to detect', '7' = 'very able to detect')
d2$detect_fraud <- revalue(d2$detect_fraud , c('1' = 'not able to detect', '7' = 'very able to detect'))
# fraud
ggplot(d2, aes(detect_fraud)) + geom_histogram(binwidth = .5, stat = "count")
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle('Have you ever made an investment where you lost some or all of the money you invested?')
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost, fill = why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12)) + guides(fill=FALSE) +
ggtitle('If yes, Which statement below best describes why you lost money?')
ggplot(d2, aes(detect_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to detect a fraudulent investment? (select one)")
# How able are you to resist high-pressure sales tactics when buying investments? (select one)
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to resist high-pressure sales tactics when buying investments? (select one)")
# How likely are you to make a fraudulent investment? (select one)
d2$likely_fraud <- factor(d2$likely_fraud)
d2$likely_fraud <- revalue(d2$likely_fraud , c('1' = 'not at all likely', '7' = 'very likely'))
ggplot(d2, aes(likely_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How likely are you to make a fraudulent investment?")
ggplot(d2, aes(detect_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to detect a fraudulent investment?") + theme(axis.title.x = element_blank())
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost, fill = why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12)) + guides(fill=FALSE) +
ggtitle('If yes, Which statement below best describes why you lost money?') +
theme(axis.title.x = element_blank())
ggplot(d2, aes(likely_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How likely are you to make a fraudulent investment?") + theme(axis.title.x = element_blank())
# How able are you to resist high-pressure sales tactics when buying investments? (select one)
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to resist high-pressure sales tactics when buying investments?") +
theme(axis.title.x = element_blank())
# How able are you to resist high-pressure sales tactics when buying investments? (select one)
d2$high_pressure <- factor(d2$high_pressure)
# How able are you to resist high-pressure sales tactics when buying investments? (select one)
d2$high_pressure <- factor(d2$high_pressure)
d2$high_pressure <- revalue(d2$high_pressure , c('1' = 'not at all able to resis', '7' = 'very able to resist'))
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to resist high-pressure sales tactics when buying investments?") +
theme(axis.title.x = element_blank())
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to resist high-pressure sales tactics \nwhen buying investments?") +
theme(axis.title.x = element_blank())
ggplot(d2, aes(likely_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How likely are you to make a fraudulent investment?") + theme(axis.title.x = element_blank())
ggplot(d2, aes(detect_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to detect a fraudulent investment?") + theme(axis.title.x = element_blank())
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost, fill = why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12)) + guides(fill=FALSE) +
ggtitle('If yes, which statement below best describes why you lost money?') +
theme(axis.title.x = element_blank())
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle('Have you ever made an investment where you lost some \nor all of the money you invested?')
source('~/github/boundSkew1/08_invest+fraud.R', echo=TRUE)
# load required packages
library(here)
library(ggplot2)
library(plyr)
# load source functions
source(here('scr', 'isolate_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# load required packages
library(here)
library(ggplot2)
library(plyr)
# load required packages
library(here)
# load required packages
library(here)
library(ggplot2)
library(plyr)
# load source functions
source(here('scr', 'isolate_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
# investment graph
# Have you ever made an investment where you lost some or all of the money you invested?
d2$lost_invest <- factor(d2$lost_invest)
d2$lost_invest <- revalue(d2$lost_invest, c("0"="No", "1"="Yes"))
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle('Have you ever made an investment where you lost some \nor all of the money you invested?')
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# load required packages
library(here)
library(ggplot2)
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
# investment graph
# Have you ever made an investment where you lost some or all of the money you invested?
d2$lost_invest <- factor(d2$lost_invest)
d2$lost_invest <- revalue(d2$lost_invest, c("0"="No", "1"="Yes"))
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle('Have you ever made an investment where you lost some \nor all of the money you invested?')
# investment graph
# Have you ever made an investment where you lost some or all of the money you invested?
library(plyr)
d2$lost_invest <- factor(d2$lost_invest)
d2$lost_invest <- revalue(d2$lost_invest, c("0"="No", "1"="Yes"))
ggplot(d2, aes(lost_invest)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle('Have you ever made an investment where you lost some \nor all of the money you invested?')
# If yes, Which statement below best describes why you lost money?
d2$why_lost <- factor(d2$why_lost)
d2$why_lost <- revalue(d2$why_lost, c('1'='Bad Investment', '2'='Market Downturn',
'3'='Lack of Knowledge', '4'='Misled or Defrauded', '5'='Other'))
ggplot(d2[which(d2$lost_invest=='Yes'),], aes(why_lost, fill = why_lost)) +
geom_histogram(binwidth = .5, stat = "count") +
theme(axis.text.x  = element_text(angle=90, vjust=0.5, size=12)) + guides(fill=FALSE) +
ggtitle('If yes, which statement below best describes why you lost money?') +
theme(axis.title.x = element_blank())
# fraud
## How able are you to detect a fraudulent investment? (select one)
d2$detect_fraud <- factor(d2$detect_fraud)
d2$detect_fraud <- revalue(d2$detect_fraud , c('1' = 'not able to detect', '7' = 'very able to detect'))
ggplot(d2, aes(detect_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to detect a fraudulent investment?") + theme(axis.title.x = element_blank())
# How likely are you to make a fraudulent investment? (select one)
d2$likely_fraud <- factor(d2$likely_fraud)
d2$likely_fraud <- revalue(d2$likely_fraud , c('1' = 'not at all likely', '7' = 'very likely'))
ggplot(d2, aes(likely_fraud)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How likely are you to make a fraudulent investment?") + theme(axis.title.x = element_blank())
# How able are you to resist high-pressure sales tactics when buying investments? (select one)
d2$high_pressure <- factor(d2$high_pressure)
d2$high_pressure <- revalue(d2$high_pressure , c('1' = 'not at all able to resist', '7' = 'very able to resist'))
ggplot(d2, aes(high_pressure)) + geom_histogram(binwidth = .5, stat = "count") +
ggtitle("How able are you to resist high-pressure sales tactics \nwhen buying investments?") +
theme(axis.title.x = element_blank())
# separate skew
d0 <- isolate_skew(dt,c(1,2),10:69)
d1 <- clean_skew2(d0)
source(here('scr', 'clean_skew.R'))
d1 <- clean_skew2(d0)
#recode response to acceptance
d1$accept <- d1$response - 1
# add skew count variable
d2 <-count_skew(d1)
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
source(here('scr', 'count_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
library(plyr)
# separate skew
d0 <- isolate_skew(dt,c(1,2),10:69)
d1 <- clean_skew2(d0)
#recode response to acceptance
d1$accept <- d1$response - 1
# add skew count variable
d2 <-count_skew(d1)
rm(d0, d1)
# investment and fraud
# 11.5.19 KLS
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
source(here('scr', 'count_skew.R'))
# set hard-coded variables
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
source(here('scr', 'count_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
View(d2)
View(d2)
# separate skew
d0 <- isolate_skew(dt,c(1,2),10:69)
d3 <- clean_skew2(d0)
View(d3)
#recode response to acceptance
d3$accept <- d3$response - 1
# add skew count variable
d4 <-count_skew(d3)
rm(d0, d1)
View(d2)
source('~/.active-rstudio-document', echo=TRUE)
View(d4)
# merge data frames
d5 <- merge(d2, d4, by = 'ID')
View(d5)
# merge data frames
d5 <- merge(d4, d2, by = 'ID')
View(d5)
View(d5)
s`1_corr2 <- rcorr(as.matrix(d5[c(4:5, 7:9)]))`
s1_corr2 <- rcorr(as.matrix(d5[c(4:5, 7:9)]))`
s
)
1
``
clear
s1_corr2 <- rcorr(as.matrix(d5[c(4:5, 7:9)]))
library(Hmisc)
s1_corr2 <- rcorr(as.matrix(d5[c(4:5, 7:9)]))
View(s1_corr2)
s1_corr2
saveRDS(s1_corr2, here('output', 's1_corr2.RDS'))
# models
d5$magval <- interaction(d5$magnitude, d5$valence)
m1 <- lm(skew_count ~ lost_invest + magval, data = d5)
summary(m1)
View(d5)
View(d5)
m1 <- lm(skew_count ~ as.numeric(as.character(lost_invest)) + magval, data = d5)
summary(m1)
d5$skew_count
d5&skew_count <- as.numeric(as.character(d5$skew_count))
d5$skew_count <- as.numeric(as.character(d5$skew_count))
m1 <- lm(skew_count ~ lost_invest + magval, data = d5)
summary(m1)
m2 <- lm(skew_count ~ detect_fraud + magval, data = d5)
summary(m2)
m3 <- lm(skew_count ~ likely_fraud + magval, data = d5)
summary(m3)
m4 <- lm(skew_count ~ high_pressure + magval, data = d5)
summary(m4)
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
source(here('scr', 'count_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
library(plyr)
# investment graph
# Have you ever made an investment where you lost some or all of the money you invested?
d2$lost_invest <- factor(d2$lost_invest)
View(d1)
sum(d2$lost_invest)
colSums(d2)
colSums(d2$lost_invest)
View(d2)
colSums(as.numeric(as.character(d2$lost_invest)))
sum(as.numeric(as.character(d2$lost_invest)))
n_lost_invest <- sum(as.numeric(as.character(d2$lost_invest)))
n_total <- nrow(d2)
n_fraud <- nrow(d2[which(d2$detect_fraud == 'Misled or Defrauded'),])
n_fraud <- nrow(d2[which(d2$why_lost == 'Misled or Defrauded'),])
n_fraud <- nrow(d2[which(d2$why_lost == 'Misled or Defrauded'),])
d2$why_lost
n_fraud <- nrow(d2[which(d2$why_lost == 4),])
# fraud
## How able are you to detect a fraudulent investment? (select one)
d2$detect_fraud <- factor(d2$detect_fraud)
d2$detect_fraud <- revalue(d2$detect_fraud , c('1' = 'not able to detect', '7' = 'very able to detect'))
n_fraud <- nrow(d2[which(d2$why_lost == 'Misled or Defrauded'),])
n_fraud <- nrow(d2[which(d2$why_lost == 'Misled or Defrauded'),])
source('~/github/boundSkew1/08_invest+fraud.R', echo=TRUE)
source('~/github/boundSkew1/08_invest+fraud.R', echo=TRUE)
'Misled or Defrauded'
n_fraud <- nrow(d2[which(d2$why_lost == 'Misled or Defrauded'),])
real_world_n <- c(n_total, n_fraud, n_lost_invest)
n_lost_invest <- sum(as.numeric(as.character(d2$lost_invest)))
d2$lost_invest
n_lost_invest <- nrow(d2[which(d2$lost_invest == 'Yes'),])
n_total <- nrow(d2)
n_fraud <- nrow(d2[which(d2$why_lost == 'Misled or Defrauded'),])
real_world_n <- c(n_total, n_fraud, n_lost_invest)
# investment and fraud
# 11.5.19 KLS
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
source(here('scr', 'count_skew.R'))
# set hard-coded variables
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# identify begining and end of
d1 <- isolate_skew(dt, 1, grep('Q173', colnames(dt)):grep('Q27', colnames(dt)))
# investment & fraud
d2 <- data.frame(d1$ID, (d1$Q173 - 2)*-1, d1$Q177, d1[11:14])
colnames(d2) <- c('ID', 'lost_invest', 'why_lost', 'detect_fraud', 'likely_fraud', 'high_pressure', 'avoid_fraud')
# counts
n_lost_invest <- nrow(d2[which(d2$lost_invest == 'Yes'),])
# counts
n_lost_invest <- nrow(d2[which(d2$lost_invest == 1),])
n_total <- nrow(d2)
n_fraud <- nrow(d2[which(d2$why_lost == 4),])
real_world_n <- c(n_total, n_fraud, n_lost_invest)
write.csv(real_world_n, here('output', 'real_world1.csv'))
write.csv(real_world_n, here('output', 'real_world1.csv'), row.names = FALSE)
source('~/github/boundSkew1/02_demographic_data.R', echo=TRUE)
install.packages('here')
install.packages('dplyr')
source('~/github/boundSkew1/02_demographic_data.R', echo=TRUE)
install.packages("ggplot2")
# load required packages
library(here)
library(ggplot2)
# load source functions
source(here('scr', 'isolate_skew.R'))
source(here('scr', 'clean_skew.R'))
source(here('scr', 'count_skew.R'))
# load data
dt <- read.csv(here("data", "bound_skew1_data.csv"))
# separate skew
d0 <- isolate_skew(dt,c(1,2),10:69)
d1 <- clean_skew2(d0)
#recode response to acceptance
d1$accept <- d1$response - 1
# add skew count variable
d2 <-count_skew(d1)
d2$skew_count_f <- ordered(d2$skew_count,
levels= c('0','1','2','3','4','5','6','7','8','9','10'))
d2$magval <- interaction(d2$valence, d2$magnitude)
# examine distribution
ggplot(d2, aes(skew_count_f)) + geom_histogram(stat='count', binwidth=.5, position="dodge")
ggplot(d2, aes(skew_count_f, fill = magval)) + geom_histogram(stat='count', binwidth=.5, position="dodge")
install.packages("Hmisc")
